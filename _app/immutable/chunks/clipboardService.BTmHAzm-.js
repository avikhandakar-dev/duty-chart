import{k as m,m as p,n as d,p as g,q as v,l as I,U as x,s as w}from"./editorContextKeys.Cdn_dJhV.js";class b{constructor(){this._value="",this._pos=0}reset(t){return this._value=t,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(t){const s=t.charCodeAt(0),r=this._value.charCodeAt(this._pos);return s-r}value(){return this._value[this._pos]}}class k{constructor(t=!0){this._caseSensitive=t}reset(t){return this._value=t,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let t=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(t)this._from++;else break;else t=!1;return this}cmp(t){return this._caseSensitive?m(t,this._value,0,t.length,this._from,this._to):p(t,this._value,0,t.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class S{constructor(t=!0,s=!0){this._splitOnBackslash=t,this._caseSensitive=s}reset(t){this._from=0,this._to=0,this._value=t,this._valueLen=t.length;for(let s=t.length-1;s>=0;s--,this._valueLen--){const r=this._value.charCodeAt(s);if(!(r===47||this._splitOnBackslash&&r===92))break}return this.next()}hasNext(){return this._to<this._valueLen}next(){this._from=this._to;let t=!0;for(;this._to<this._valueLen;this._to++){const s=this._value.charCodeAt(this._to);if(s===47||this._splitOnBackslash&&s===92)if(t)this._from++;else break;else t=!1}return this}cmp(t){return this._caseSensitive?m(t,this._value,0,t.length,this._from,this._to):p(t,this._value,0,t.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class N{constructor(t,s){this._ignorePathCasing=t,this._ignoreQueryAndFragment=s,this._states=[],this._stateIdx=0}reset(t){return this._value=t,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new S(!1,!this._ignorePathCasing(t)),this._pathIterator.reset(t.path),this._pathIterator.value()&&this._states.push(3)),this._ignoreQueryAndFragment(t)||(this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5)),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(t){if(this._states[this._stateIdx]===1)return d(t,this._value.scheme);if(this._states[this._stateIdx]===2)return d(t,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(t);if(this._states[this._stateIdx]===4)return g(t,this._value.query);if(this._states[this._stateIdx]===5)return g(t,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}class _{constructor(){this.height=1}rotateLeft(){const t=this.right;return this.right=t.left,t.left=this,this.updateHeight(),t.updateHeight(),t}rotateRight(){const t=this.left;return this.left=t.right,t.right=this,this.updateHeight(),t.updateHeight(),t}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){var t;return((t=this.left)==null?void 0:t.height)??0}get heightRight(){var t;return((t=this.right)==null?void 0:t.height)??0}}class c{static forUris(t=()=>!1,s=()=>!1){return new c(new N(t,s))}static forStrings(){return new c(new b)}static forConfigKeys(){return new c(new k)}constructor(t){this._iter=t}clear(){this._root=void 0}set(t,s){const r=this._iter.reset(t);let e;this._root||(this._root=new _,this._root.segment=r.value());const i=[];for(e=this._root;;){const h=r.cmp(e.segment);if(h>0)e.left||(e.left=new _,e.left.segment=r.value()),i.push([-1,e]),e=e.left;else if(h<0)e.right||(e.right=new _,e.right.segment=r.value()),i.push([1,e]),e=e.right;else if(r.hasNext())r.next(),e.mid||(e.mid=new _,e.mid.segment=r.value()),i.push([0,e]),e=e.mid;else break}const a=e.value;e.value=s,e.key=t;for(let h=i.length-1;h>=0;h--){const o=i[h][1];o.updateHeight();const l=o.balanceFactor();if(l<-1||l>1){const u=i[h][0],f=i[h+1][0];if(u===1&&f===1)i[h][1]=o.rotateLeft();else if(u===-1&&f===-1)i[h][1]=o.rotateRight();else if(u===1&&f===-1)o.right=i[h+1][1]=i[h+1][1].rotateRight(),i[h][1]=o.rotateLeft();else if(u===-1&&f===1)o.left=i[h+1][1]=i[h+1][1].rotateLeft(),i[h][1]=o.rotateRight();else throw new Error;if(h>0)switch(i[h-1][0]){case-1:i[h-1][1].left=i[h][1];break;case 1:i[h-1][1].right=i[h][1];break;case 0:i[h-1][1].mid=i[h][1];break}else this._root=i[0][1]}}return a}get(t){var s;return(s=this._getNode(t))==null?void 0:s.value}_getNode(t){const s=this._iter.reset(t);let r=this._root;for(;r;){const e=s.cmp(r.segment);if(e>0)r=r.left;else if(e<0)r=r.right;else if(s.hasNext())s.next(),r=r.mid;else break}return r}has(t){const s=this._getNode(t);return!((s==null?void 0:s.value)===void 0&&(s==null?void 0:s.mid)===void 0)}delete(t){return this._delete(t,!1)}deleteSuperstr(t){return this._delete(t,!0)}_delete(t,s){const r=this._iter.reset(t),e=[];let i=this._root;for(;i;){const a=r.cmp(i.segment);if(a>0)e.push([-1,i]),i=i.left;else if(a<0)e.push([1,i]),i=i.right;else if(r.hasNext())r.next(),e.push([0,i]),i=i.mid;else break}if(i){if(s?(i.left=void 0,i.mid=void 0,i.right=void 0,i.height=1):(i.key=void 0,i.value=void 0),!i.mid&&!i.value)if(i.left&&i.right){const a=this._min(i.right);if(a.key){const{key:h,value:o,segment:l}=a;this._delete(a.key,!1),i.key=h,i.value=o,i.segment=l}}else{const a=i.left??i.right;if(e.length>0){const[h,o]=e[e.length-1];switch(h){case-1:o.left=a;break;case 0:o.mid=a;break;case 1:o.right=a;break}}else this._root=a}for(let a=e.length-1;a>=0;a--){const h=e[a][1];h.updateHeight();const o=h.balanceFactor();if(o>1?(h.right.balanceFactor()>=0||(h.right=h.right.rotateRight()),e[a][1]=h.rotateLeft()):o<-1&&(h.left.balanceFactor()<=0||(h.left=h.left.rotateLeft()),e[a][1]=h.rotateRight()),a>0)switch(e[a-1][0]){case-1:e[a-1][1].left=e[a][1];break;case 1:e[a-1][1].right=e[a][1];break;case 0:e[a-1][1].mid=e[a][1];break}else this._root=e[0][1]}}}_min(t){for(;t.left;)t=t.left;return t}findSubstr(t){const s=this._iter.reset(t);let r=this._root,e;for(;r;){const i=s.cmp(r.segment);if(i>0)r=r.left;else if(i<0)r=r.right;else if(s.hasNext())s.next(),e=r.value||e,r=r.mid;else break}return r&&r.value||e}findSuperstr(t){return this._findSuperstrOrElement(t,!1)}_findSuperstrOrElement(t,s){const r=this._iter.reset(t);let e=this._root;for(;e;){const i=r.cmp(e.segment);if(i>0)e=e.left;else if(i<0)e=e.right;else if(r.hasNext())r.next(),e=e.mid;else return e.mid?this._entries(e.mid):s?e.value:void 0}}forEach(t){for(const[s,r]of this)t(r,s)}*[Symbol.iterator](){yield*this._entries(this._root)}_entries(t){const s=[];return this._dfsEntries(t,s),s[Symbol.iterator]()}_dfsEntries(t,s){t&&(t.left&&this._dfsEntries(t.left,s),t.value&&s.push([t.key,t.value]),t.mid&&this._dfsEntries(t.mid,s),t.right&&this._dfsEntries(t.right,s))}}const O=v("contextService");function E(n){const t=n;return typeof(t==null?void 0:t.id)=="string"&&x.isUri(t.uri)}function W(n){const t=n;return typeof(t==null?void 0:t.id)=="string"&&!E(n)&&!C(n)}const y={id:"empty-window"};function A(n,t){if(typeof n=="string"||typeof n>"u")return typeof n=="string"?{id:w(n)}:y;const s=n;return s.configuration?{id:s.id,configPath:s.configuration}:s.folders.length===1?{id:s.id,uri:s.folders[0].uri}:{id:s.id}}function C(n){const t=n;return typeof(t==null?void 0:t.id)=="string"&&x.isUri(t.configPath)}class P{constructor(t,s){this.raw=s,this.uri=t.uri,this.index=t.index,this.name=t.name}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}}const L="code-workspace";I("codeWorkspace","Code Workspace");const F="4064f6ec-cb38-4ad0-af64-ee6467e63c82",H=v("clipboardService");export{O as I,F as S,c as T,L as W,E as a,H as b,P as c,W as i,A as t};
